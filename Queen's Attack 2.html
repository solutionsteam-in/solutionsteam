<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Queen's Attack ||.html</title>
    <link rel="stylesheet" href="common.css">
  </head>
  <body>
    <div class="box1">

        <h2>Solution:</h2>
        <h2>For All Hackerrank Solutions<a href="hackerrank.html">Visit Homepage</a></h2>
    <h3>C++:</h3>
  <pre>
    #include < bits/stdc++.h>
    using namespace std;
    int n,k,qx,qy;
    pair< int,int> t0,t45,t90,t135,t180,t225,t270,t315;
    void generate()
    {
        int c,x,y;
        t0=make_pair(n,qy);
        t90=make_pair(qx,n);
        t180=make_pair(1,qy);
        t270=make_pair(qx,1);
        c=qy-qx;
        x=(c< 0?abs(c):0)+1;
        t225=make_pair(x,x+c);
        x=c>0?n-c:n;
        t45=make_pair(x,x+c);
        c=qx+qy;
        x=c>n?c-n:1;
        t135=make_pair(x,-x+c);
        x=c<=n?c-1:n;
        t315=make_pair(x,-x+c);
    }
    void handle()
    {
        int x,y;
        int ax,ay;
        cin>>x>>y;
        if(x==qx)
        {
            //handle t0 t180
            if(y>qy)
            {
                tie(ax,ay)=t90;
                if(y< ay) t90=make_pair(ax,y-1);
            }
            if(y< qy)
            {
                tie(ax,ay)=t270;
                if(y>ay) t270=make_pair(ax,y+1);
            }
        }
        else if(y==qy)
        {
            if(x>qx)
            {
                tie(ax,ay)=t0;
                if(x< ax) t0=make_pair(x-1,ay);
            }
            if(x< qx)
            {
                tie(ax,ay)=t180;
                if(x>ax) t180=make_pair(x+1,ay);
            }
        }
        else
        {
            int m1=x-qx,m2=y-qy;
            if(abs(m1)==abs(m2))
            {
                if(m1< 0&&m2< 0)
                {
                    tie(ax,ay)=t225;
                    if(y>ay) t225=make_pair(x+1,y+1);
                }
                else if(m1< 0&&m2>0)
                {
                    tie(ax,ay)=t135;
                    if(y< ay) t135=make_pair(x+1,y-1);
                }
                else if(m1>0&&m2< 0)
                {
                    tie(ax,ay)=t315;
                    if(y>ay) t315=make_pair(x-1,y+1);
                }
                else if(m1>0&&m2>0)
                {
                    tie(ax,ay)=t45;
                    if(y< ay) t45=make_pair(x-1,y-1);
                }
            }
        }
    }
    #ifndef test
    void answer()
    {
        int val=0,x,y;
        tie(x,y)=t0;
        val+=abs(x-qx);
        tie(x,y)=t45;
        val+=abs(x-qx);
        tie(x,y)=t90;
        val+=abs(y-qy);
        tie(x,y)=t135;
        val+=abs(x-qx);
        tie(x,y)=t180;
        val+=abs(x-qx);
        tie(x,y)=t225;
        val+=abs(x-qx);
        tie(x,y)=t270;
        val+=abs(y-qy);
        tie(x,y)=t315;
        val+=abs(x-qx);
        cout<< val<<'\n';
    }
    #else
    void answer()
    {
        cout<<"test\n";
        int val=0,x,y;
        tie(x,y)=t0;
        cout<< x<<' '<< y<<'\n';
        tie(x,y)=t45;
        cout<< x<<' '<< y<<'\n';
        tie(x,y)=t90;
        cout<< x<<' '<< y<<'\n';
        tie(x,y)=t135;
        cout<< x<<' '<< y<<'\n';
        tie(x,y)=t180;
        cout<< x<<' '<< y<<'\n';
        tie(x,y)=t225;
        cout<< x<<' '<< y<<'\n';
        tie(x,y)=t270;
        cout<< x<<' '<< y<<'\n';
        tie(x,y)=t315;
        cout<< x<<' '<< y<<'\n';
        //cout<< val<<'\n';
    }
    #endif
    int main()
    {
        cin>>n>>k>>qx>>qy;
        generate();
        while(k--)
        {
            handle();
        }
        answer();
        return 0;
    }
    </pre>
  <h2>For All Hackerrank Solutions<a href="hackerrank.html">Visit Homepage</a></h2>
  <h3>JAVA:</h3>
  <pre>
    import java.io.*;
    import java.util.*;
    import java.text.*;
    import java.math.*;
    import java.util.regex.*;
    public class Solution {

    	public static void main(String[] args) {

    		Scanner sc = new Scanner(System.in);
    		int n = sc.nextInt();
    		int k = sc.nextInt();
    		int rq = sc.nextInt();
    		int cq = sc.nextInt();

    		int up_squares = n - rq;
    		int right_squares = n - cq;
    		int down_squares = rq - 1;
    		int left_squares = cq - 1;
    		int left_up_squares = Math.min(left_squares, up_squares);
    		int right_up_squares = Math.min(up_squares, right_squares);
    		int left_down_squares = Math.min(down_squares, left_squares);
    		int right_down_squares = Math.min(right_squares, down_squares);

    		for (int i = 0; i < k; i++) {
    			int ro = sc.nextInt();
    			int co = sc.nextInt();
    			if (ro == rq && co < cq && Math.abs(co - cq) - 1 < left_squares) {
    				left_squares = Math.abs(co - cq) - 1;
    			}
    			if (ro == rq && co > cq && Math.abs(co - cq) - 1 < right_squares) {
    				right_squares = Math.abs(co - cq) - 1;
    			}
    			if (co == cq && ro < rq && Math.abs(ro - rq) - 1 < down_squares) {
    				down_squares = Math.abs(ro - rq) - 1;
    			}

    			if (co == cq && ro > rq && Math.abs(ro - rq) - 1 < up_squares) {
    				up_squares = Math.abs(ro - rq) - 1;
    			}
    			if (Math.abs(ro - rq) == Math.abs(co - cq)) {
    				if (ro > rq && co < cq && Math.abs(ro - rq) - 1 < left_up_squares) {
    					left_up_squares = Math.abs(ro - rq) - 1;
    				}
    				if (ro < rq && co < cq && Math.abs(ro - rq) - 1 < left_down_squares) {
    					left_down_squares = Math.abs(ro - rq) - 1;
    				}
    				if (ro < rq && co > cq && Math.abs(ro - rq) - 1 < right_down_squares) {
    					right_down_squares = Math.abs(ro - rq) - 1;
    				}
    				if (ro > rq && co > cq && Math.abs(ro - rq) - 1 < right_up_squares) {
    					right_up_squares = Math.abs(ro - rq) - 1;
    				}
    			}

    		}

    		int total_moves = right_squares + left_squares + up_squares + down_squares + left_down_squares + left_up_squares
    				+ right_up_squares + right_down_squares;

    		System.out.println(total_moves);

    		sc.close();

    	}

    }

  </pre>
    <h2>For All Hackerrank Solutions<a href="hackerrank.html">Visit Homepage</a></h2>

        <h3>Python:</h3>
  <pre>
    import sys

    if __name__ == '__main__':
        n, k = map(int, input().strip().split(" "))
        rq, cq = map(int, input().strip().split(" "))

        up_squares = n - rq
        right_squares = n - cq
        down_squares = rq - 1
        left_squares = cq - 1
        left_up_squares = min(left_squares, up_squares)
        right_up_squares = min(up_squares, right_squares)
        left_down_squares = min(down_squares, left_squares)
        right_down_squares = min(right_squares, down_squares)

        for _ in range(0, k):
            ro, co = map(int, input().strip().split(" "))

            if ro == rq and co < cq and abs(co - cq) - 1 < left_squares:
                left_squares = abs(co - cq) - 1
            if ro == rq and co > cq and abs(co - cq) - 1 < right_squares:
                right_squares = abs(co - cq) - 1
            if co == cq and ro < rq and abs(ro - rq) - 1 < down_squares:
                down_squares = abs(ro - rq) - 1
            if co == cq and ro > rq and abs(ro - rq) - 1 < up_squares:
                up_squares = abs(ro - rq) - 1

            if abs(ro - rq) == abs(co - cq):
                if ro > rq and co < cq and abs(ro - rq) - 1 < left_up_squares:
                    left_up_squares = abs(ro - rq) - 1
                if ro < rq and co < cq and abs(ro - rq) - 1 < left_down_squares:
                    left_down_squares = abs(ro - rq) - 1
                if ro < rq and co > cq and abs(ro - rq) - 1 < right_down_squares:
                    right_down_squares = abs(ro - rq) - 1
                if ro > rq and co > cq and abs(ro - rq) - 1 < right_up_squares:
                    right_up_squares = abs(ro - rq) - 1

        total_moves = right_squares + left_squares + up_squares + down_squares + left_down_squares + left_up_squares + right_up_squares + right_down_squares

        print(total_moves)
  </pre>
  <h2>For All Hackerrank Solutions<a href="hackerrank.html">Visit Homepage</a></h2>

    </div>
  </body>
</html>
